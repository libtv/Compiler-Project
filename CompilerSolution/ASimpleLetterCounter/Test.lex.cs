using System;
using System.Collections.Generic;
using System.Text;
using System.Collections;
using System.IO;

namespace IISPLParserGenerator
{
   public class myLexicalAnalyzer : IISPLParserGenerator.IISPLLexicalAnalyzer 
    {
       

    /* A Lex Program for A Simple Letter Counter
    file name : Test.lex
    tokens : word, CR,
    2020. 04. 12
    Jun Ho Kim
    */
    int WordNo=0, CharacterNo=0, LnNo=0;

public void Test(string fn) {
    install(fn);
    do {
        string t = (string) lexan();
    } while(!IsDone());
    Console.Write("Word No: " + WordNo + " LineNo : " + LnNo + " CharacterNo: " + CharacterNo);
}
   protected override object Actions(int state)
   {
      switch (state)
       {
                  case 1:
                  case 2:
                  case 6:
                  case 7:{ WordNo++; CharacterNo+=lexbuf.Length; return("WORD");}; break;
                  case 3:{ LnNo++;    CharacterNo++;                    return("CR"); }; break;
                  case 4:
                  case 5:{ CharacterNo++;   return(lexbuf); }; break;
                  default : return null;
        }
   }
    protected override void Install()
    {
           trans=new int[,]{
             {0,4,'\t'},
             {0,3,'\n'},
             {0,5,'\r'},
             {0,4,' '},
             {0,4,'!'},
             {0,4,'"'},
             {0,4,'#'},
             {0,4,'$'},
             {0,4,'%'},
             {0,4,'&'},
             {0,4,'\''},
             {0,4,'('},
             {0,4,')'},
             {0,4,'*'},
             {0,4,'+'},
             {0,4,','},
             {0,4,'-'},
             {0,4,'.'},
             {0,4,'/'},
             {0,2,'0'},
             {0,2,'1'},
             {0,2,'2'},
             {0,2,'3'},
             {0,2,'4'},
             {0,2,'5'},
             {0,2,'6'},
             {0,2,'7'},
             {0,2,'8'},
             {0,2,'9'},
             {0,4,':'},
             {0,4,';'},
             {0,4,'<'},
             {0,4,'='},
             {0,4,'>'},
             {0,4,'?'},
             {0,4,'@'},
             {0,4,'A'},
             {0,4,'B'},
             {0,4,'C'},
             {0,4,'D'},
             {0,4,'E'},
             {0,4,'F'},
             {0,4,'G'},
             {0,4,'H'},
             {0,4,'I'},
             {0,4,'J'},
             {0,4,'K'},
             {0,4,'L'},
             {0,4,'M'},
             {0,4,'N'},
             {0,4,'O'},
             {0,4,'P'},
             {0,4,'Q'},
             {0,4,'R'},
             {0,4,'S'},
             {0,4,'T'},
             {0,4,'U'},
             {0,4,'V'},
             {0,4,'W'},
             {0,4,'X'},
             {0,4,'Y'},
             {0,4,'Z'},
             {0,4,'['},
             {0,4,'\\'},
             {0,4,']'},
             {0,4,'^'},
             {0,4,'_'},
             {0,4,'`'},
             {0,1,'a'},
             {0,1,'b'},
             {0,1,'c'},
             {0,1,'d'},
             {0,1,'e'},
             {0,1,'f'},
             {0,1,'g'},
             {0,1,'h'},
             {0,1,'i'},
             {0,1,'j'},
             {0,1,'k'},
             {0,1,'l'},
             {0,1,'m'},
             {0,1,'n'},
             {0,1,'o'},
             {0,1,'p'},
             {0,1,'q'},
             {0,1,'r'},
             {0,1,'s'},
             {0,1,'t'},
             {0,1,'u'},
             {0,1,'v'},
             {0,1,'w'},
             {0,1,'x'},
             {0,1,'y'},
             {0,1,'z'},
             {0,4,'{'},
             {0,4,'|'},
             {0,4,'}'},
             {0,4,'~'},
             {0,4,''},
             {1,7,'0'},
             {1,7,'1'},
             {1,7,'2'},
             {1,7,'3'},
             {1,7,'4'},
             {1,7,'5'},
             {1,7,'6'},
             {1,7,'7'},
             {1,7,'8'},
             {1,7,'9'},
             {1,6,'a'},
             {1,6,'b'},
             {1,6,'c'},
             {1,6,'d'},
             {1,6,'e'},
             {1,6,'f'},
             {1,6,'g'},
             {1,6,'h'},
             {1,6,'i'},
             {1,6,'j'},
             {1,6,'k'},
             {1,6,'l'},
             {1,6,'m'},
             {1,6,'n'},
             {1,6,'o'},
             {1,6,'p'},
             {1,6,'q'},
             {1,6,'r'},
             {1,6,'s'},
             {1,6,'t'},
             {1,6,'u'},
             {1,6,'v'},
             {1,6,'w'},
             {1,6,'x'},
             {1,6,'y'},
             {1,6,'z'},
             {2,7,'0'},
             {2,7,'1'},
             {2,7,'2'},
             {2,7,'3'},
             {2,7,'4'},
             {2,7,'5'},
             {2,7,'6'},
             {2,7,'7'},
             {2,7,'8'},
             {2,7,'9'},
             {2,6,'a'},
             {2,6,'b'},
             {2,6,'c'},
             {2,6,'d'},
             {2,6,'e'},
             {2,6,'f'},
             {2,6,'g'},
             {2,6,'h'},
             {2,6,'i'},
             {2,6,'j'},
             {2,6,'k'},
             {2,6,'l'},
             {2,6,'m'},
             {2,6,'n'},
             {2,6,'o'},
             {2,6,'p'},
             {2,6,'q'},
             {2,6,'r'},
             {2,6,'s'},
             {2,6,'t'},
             {2,6,'u'},
             {2,6,'v'},
             {2,6,'w'},
             {2,6,'x'},
             {2,6,'y'},
             {2,6,'z'},
             {6,7,'0'},
             {6,7,'1'},
             {6,7,'2'},
             {6,7,'3'},
             {6,7,'4'},
             {6,7,'5'},
             {6,7,'6'},
             {6,7,'7'},
             {6,7,'8'},
             {6,7,'9'},
             {6,6,'a'},
             {6,6,'b'},
             {6,6,'c'},
             {6,6,'d'},
             {6,6,'e'},
             {6,6,'f'},
             {6,6,'g'},
             {6,6,'h'},
             {6,6,'i'},
             {6,6,'j'},
             {6,6,'k'},
             {6,6,'l'},
             {6,6,'m'},
             {6,6,'n'},
             {6,6,'o'},
             {6,6,'p'},
             {6,6,'q'},
             {6,6,'r'},
             {6,6,'s'},
             {6,6,'t'},
             {6,6,'u'},
             {6,6,'v'},
             {6,6,'w'},
             {6,6,'x'},
             {6,6,'y'},
             {6,6,'z'},
             {7,7,'0'},
             {7,7,'1'},
             {7,7,'2'},
             {7,7,'3'},
             {7,7,'4'},
             {7,7,'5'},
             {7,7,'6'},
             {7,7,'7'},
             {7,7,'8'},
             {7,7,'9'},
             {7,6,'a'},
             {7,6,'b'},
             {7,6,'c'},
             {7,6,'d'},
             {7,6,'e'},
             {7,6,'f'},
             {7,6,'g'},
             {7,6,'h'},
             {7,6,'i'},
             {7,6,'j'},
             {7,6,'k'},
             {7,6,'l'},
             {7,6,'m'},
             {7,6,'n'},
             {7,6,'o'},
             {7,6,'p'},
             {7,6,'q'},
             {7,6,'r'},
             {7,6,'s'},
             {7,6,'t'},
             {7,6,'u'},
             {7,6,'v'},
             {7,6,'w'},
             {7,6,'x'},
             {7,6,'y'},
            {7,6,'z'}};
            FinalStates=new int[]{1,2,6,7,3,1,2,4,5};
            Lookaheads=new string[]{"1,2,6,7;;","3;;","1,2,4,5;;"};                
       }
    }
}