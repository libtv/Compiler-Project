using System;
using System.Collections.Generic;
using System.Text;
using System.Collections;
using System.IO;

namespace IISPLParserGenerator
{
   public class myLexicalAnalyzer : IISPLParserGenerator.IISPLLexicalAnalyzer 
    {
       

    CSymbolTable st=new CSymbolTable();

public void Test(string path)
{
	install(path); 
	install_reserved_words();
	do {
		yyoval="";
		string tok = (string)lexan();
		if (tok == "T_ws") { }
		else if (tok == "T_id"){ 
			Item item = st[(int)yyoval];
			Console.WriteLine(string.Format("{0}\t{1}\t{2}SybolTable[{3}]",
			tok.PadLeft(12), item.lexeme, item.attribute, yyoval));
		}

		else if (tok == "T_num" || tok == "T_relop" || tok == "T_dnum" || tok == "T_indices")
			Console.WriteLine(string.Format("{0}\t{1}", tok.PadLeft(12), yyoval));

		else Console.WriteLine(string.Format("{0:10}", tok.PadLeft(12)));
		} while(!IsDone());
	Console.WriteLine(st.ToString()); 
	Console.ReadKey(); 
}

public void install_reserved_words() {
	st.Add("T_if", "if");
	st.Add("T_int", "int");
	st.Add("T_double", "double");
	st.Add("T_indices", "indices");
              st.Add("T_foreach", "foreach");
              st.Add("T_in", "in");
}

public int install_id(string lexeme) {
	int idx=st.Look_Up(lexeme);
	if(idx != -1 ) return idx;
	st.Add("T_id", lexeme);
	return st.Count-1;
}
   protected override object Actions(int state)
   {
      switch (state)
       {
                  case 0:
                  case 1:{return("T_ws");}; break;
                  case 2:
                  case 9:
                  case 10:{yyoval=install_id(lexbuf); return(st[(int)yyoval].token);}; break;
                  case 3:{yyoval=int.Parse(lexbuf); return("T_num");}; break;
                  case 16:
                  case 17:
                  case 18:{yyoval=lexbuf; return("T_indices");}; break;
                  case 15:{yyoval=double.Parse(lexbuf); return("T_dnum");}; break;
                  case 4:
                  case 5:
                  case 6:{return(lexbuf);}; break;
                  case 7:
                  case 8:
                  case 12:
                  case 13:
                  case 14:{yyoval=lexbuf; return("T_relop");}; break;
                  default : return null;
        }
   }
    protected override void Install()
    {
           trans=new int[,]{
             {0,1,'\t'},
             {0,1,'\n'},
             {0,1,'\r'},
             {0,1,' '},
             {0,6,'('},
             {0,6,')'},
             {0,6,'*'},
             {0,5,'+'},
             {0,1,','},
             {0,4,'-'},
             {0,6,'/'},
             {0,3,'0'},
             {0,3,'1'},
             {0,3,'2'},
             {0,3,'3'},
             {0,3,'4'},
             {0,3,'5'},
             {0,3,'6'},
             {0,3,'7'},
             {0,3,'8'},
             {0,3,'9'},
             {0,6,';'},
             {0,7,'<'},
             {0,6,'='},
             {0,8,'>'},
             {0,2,'A'},
             {0,2,'B'},
             {0,2,'C'},
             {0,2,'D'},
             {0,2,'E'},
             {0,2,'F'},
             {0,2,'G'},
             {0,2,'H'},
             {0,2,'I'},
             {0,2,'J'},
             {0,2,'K'},
             {0,2,'L'},
             {0,2,'M'},
             {0,2,'N'},
             {0,2,'O'},
             {0,2,'P'},
             {0,2,'Q'},
             {0,2,'R'},
             {0,2,'S'},
             {0,2,'T'},
             {0,2,'U'},
             {0,2,'V'},
             {0,2,'W'},
             {0,2,'X'},
             {0,2,'Y'},
             {0,2,'Z'},
             {0,6,'['},
             {0,6,']'},
             {0,2,'a'},
             {0,2,'b'},
             {0,2,'c'},
             {0,2,'d'},
             {0,2,'e'},
             {0,2,'f'},
             {0,2,'g'},
             {0,2,'h'},
             {0,2,'i'},
             {0,2,'j'},
             {0,2,'k'},
             {0,2,'l'},
             {0,2,'m'},
             {0,2,'n'},
             {0,2,'o'},
             {0,2,'p'},
             {0,2,'q'},
             {0,2,'r'},
             {0,2,'s'},
             {0,2,'t'},
             {0,2,'u'},
             {0,2,'v'},
             {0,2,'w'},
             {0,2,'x'},
             {0,2,'y'},
             {0,2,'z'},
             {0,6,'{'},
             {0,6,'}'},
             {1,1,'\t'},
             {1,1,'\n'},
             {1,1,'\r'},
             {1,1,' '},
             {1,1,','},
             {2,10,'0'},
             {2,10,'1'},
             {2,10,'2'},
             {2,10,'3'},
             {2,10,'4'},
             {2,10,'5'},
             {2,10,'6'},
             {2,10,'7'},
             {2,10,'8'},
             {2,10,'9'},
             {2,9,'A'},
             {2,9,'B'},
             {2,9,'C'},
             {2,9,'D'},
             {2,9,'E'},
             {2,9,'F'},
             {2,9,'G'},
             {2,9,'H'},
             {2,9,'I'},
             {2,9,'J'},
             {2,9,'K'},
             {2,9,'L'},
             {2,9,'M'},
             {2,9,'N'},
             {2,9,'O'},
             {2,9,'P'},
             {2,9,'Q'},
             {2,9,'R'},
             {2,9,'S'},
             {2,9,'T'},
             {2,9,'U'},
             {2,9,'V'},
             {2,9,'W'},
             {2,9,'X'},
             {2,9,'Y'},
             {2,9,'Z'},
             {2,9,'a'},
             {2,9,'b'},
             {2,9,'c'},
             {2,9,'d'},
             {2,9,'e'},
             {2,9,'f'},
             {2,9,'g'},
             {2,9,'h'},
             {2,9,'i'},
             {2,9,'j'},
             {2,9,'k'},
             {2,9,'l'},
             {2,9,'m'},
             {2,9,'n'},
             {2,9,'o'},
             {2,9,'p'},
             {2,9,'q'},
             {2,9,'r'},
             {2,9,'s'},
             {2,9,'t'},
             {2,9,'u'},
             {2,9,'v'},
             {2,9,'w'},
             {2,9,'x'},
             {2,9,'y'},
             {2,9,'z'},
             {3,11,'.'},
             {3,3,'0'},
             {3,3,'1'},
             {3,3,'2'},
             {3,3,'3'},
             {3,3,'4'},
             {3,3,'5'},
             {3,3,'6'},
             {3,3,'7'},
             {3,3,'8'},
             {3,3,'9'},
             {4,3,'0'},
             {4,3,'1'},
             {4,3,'2'},
             {4,3,'3'},
             {4,3,'4'},
             {4,3,'5'},
             {4,3,'6'},
             {4,3,'7'},
             {4,3,'8'},
             {4,3,'9'},
             {5,3,'0'},
             {5,3,'1'},
             {5,3,'2'},
             {5,3,'3'},
             {5,3,'4'},
             {5,3,'5'},
             {5,3,'6'},
             {5,3,'7'},
             {5,3,'8'},
             {5,3,'9'},
             {7,12,'='},
             {7,13,'>'},
             {8,14,'='},
             {9,10,'0'},
             {9,10,'1'},
             {9,10,'2'},
             {9,10,'3'},
             {9,10,'4'},
             {9,10,'5'},
             {9,10,'6'},
             {9,10,'7'},
             {9,10,'8'},
             {9,10,'9'},
             {9,9,'A'},
             {9,9,'B'},
             {9,9,'C'},
             {9,9,'D'},
             {9,9,'E'},
             {9,9,'F'},
             {9,9,'G'},
             {9,9,'H'},
             {9,9,'I'},
             {9,9,'J'},
             {9,9,'K'},
             {9,9,'L'},
             {9,9,'M'},
             {9,9,'N'},
             {9,9,'O'},
             {9,9,'P'},
             {9,9,'Q'},
             {9,9,'R'},
             {9,9,'S'},
             {9,9,'T'},
             {9,9,'U'},
             {9,9,'V'},
             {9,9,'W'},
             {9,9,'X'},
             {9,9,'Y'},
             {9,9,'Z'},
             {9,9,'a'},
             {9,9,'b'},
             {9,9,'c'},
             {9,9,'d'},
             {9,9,'e'},
             {9,9,'f'},
             {9,9,'g'},
             {9,9,'h'},
             {9,9,'i'},
             {9,9,'j'},
             {9,9,'k'},
             {9,9,'l'},
             {9,9,'m'},
             {9,9,'n'},
             {9,9,'o'},
             {9,9,'p'},
             {9,9,'q'},
             {9,9,'r'},
             {9,9,'s'},
             {9,9,'t'},
             {9,9,'u'},
             {9,9,'v'},
             {9,9,'w'},
             {9,9,'x'},
             {9,9,'y'},
             {9,9,'z'},
             {10,10,'0'},
             {10,10,'1'},
             {10,10,'2'},
             {10,10,'3'},
             {10,10,'4'},
             {10,10,'5'},
             {10,10,'6'},
             {10,10,'7'},
             {10,10,'8'},
             {10,10,'9'},
             {10,9,'A'},
             {10,9,'B'},
             {10,9,'C'},
             {10,9,'D'},
             {10,9,'E'},
             {10,9,'F'},
             {10,9,'G'},
             {10,9,'H'},
             {10,9,'I'},
             {10,9,'J'},
             {10,9,'K'},
             {10,9,'L'},
             {10,9,'M'},
             {10,9,'N'},
             {10,9,'O'},
             {10,9,'P'},
             {10,9,'Q'},
             {10,9,'R'},
             {10,9,'S'},
             {10,9,'T'},
             {10,9,'U'},
             {10,9,'V'},
             {10,9,'W'},
             {10,9,'X'},
             {10,9,'Y'},
             {10,9,'Z'},
             {10,9,'a'},
             {10,9,'b'},
             {10,9,'c'},
             {10,9,'d'},
             {10,9,'e'},
             {10,9,'f'},
             {10,9,'g'},
             {10,9,'h'},
             {10,9,'i'},
             {10,9,'j'},
             {10,9,'k'},
             {10,9,'l'},
             {10,9,'m'},
             {10,9,'n'},
             {10,9,'o'},
             {10,9,'p'},
             {10,9,'q'},
             {10,9,'r'},
             {10,9,'s'},
             {10,9,'t'},
             {10,9,'u'},
             {10,9,'v'},
             {10,9,'w'},
             {10,9,'x'},
             {10,9,'y'},
             {10,9,'z'},
             {11,15,'0'},
             {11,15,'1'},
             {11,15,'2'},
             {11,15,'3'},
             {11,15,'4'},
             {11,15,'5'},
             {11,15,'6'},
             {11,15,'7'},
             {11,15,'8'},
             {11,15,'9'},
             {15,15,'0'},
             {15,15,'1'},
             {15,15,'2'},
             {15,15,'3'},
             {15,15,'4'},
             {15,15,'5'},
             {15,15,'6'},
             {15,15,'7'},
             {15,15,'8'},
             {15,15,'9'},
             {15,16,'A'},
             {15,16,'B'},
             {15,16,'C'},
             {15,16,'D'},
             {15,16,'E'},
             {15,16,'F'},
             {15,16,'G'},
             {15,16,'H'},
             {15,16,'I'},
             {15,16,'J'},
             {15,16,'K'},
             {15,16,'L'},
             {15,16,'M'},
             {15,16,'N'},
             {15,16,'O'},
             {15,16,'P'},
             {15,16,'Q'},
             {15,16,'R'},
             {15,16,'S'},
             {15,16,'T'},
             {15,16,'U'},
             {15,16,'V'},
             {15,16,'W'},
             {15,16,'X'},
             {15,16,'Y'},
             {15,16,'Z'},
             {15,16,'a'},
             {15,16,'b'},
             {15,16,'c'},
             {15,16,'d'},
             {15,16,'e'},
             {15,16,'f'},
             {15,16,'g'},
             {15,16,'h'},
             {15,16,'i'},
             {15,16,'j'},
             {15,16,'k'},
             {15,16,'l'},
             {15,16,'m'},
             {15,16,'n'},
             {15,16,'o'},
             {15,16,'p'},
             {15,16,'q'},
             {15,16,'r'},
             {15,16,'s'},
             {15,16,'t'},
             {15,16,'u'},
             {15,16,'v'},
             {15,16,'w'},
             {15,16,'x'},
             {15,16,'y'},
             {15,16,'z'},
             {16,18,'0'},
             {16,18,'1'},
             {16,18,'2'},
             {16,18,'3'},
             {16,18,'4'},
             {16,18,'5'},
             {16,18,'6'},
             {16,18,'7'},
             {16,18,'8'},
             {16,18,'9'},
             {16,17,'A'},
             {16,17,'B'},
             {16,17,'C'},
             {16,17,'D'},
             {16,17,'E'},
             {16,17,'F'},
             {16,17,'G'},
             {16,17,'H'},
             {16,17,'I'},
             {16,17,'J'},
             {16,17,'K'},
             {16,17,'L'},
             {16,17,'M'},
             {16,17,'N'},
             {16,17,'O'},
             {16,17,'P'},
             {16,17,'Q'},
             {16,17,'R'},
             {16,17,'S'},
             {16,17,'T'},
             {16,17,'U'},
             {16,17,'V'},
             {16,17,'W'},
             {16,17,'X'},
             {16,17,'Y'},
             {16,17,'Z'},
             {16,17,'a'},
             {16,17,'b'},
             {16,17,'c'},
             {16,17,'d'},
             {16,17,'e'},
             {16,17,'f'},
             {16,17,'g'},
             {16,17,'h'},
             {16,17,'i'},
             {16,17,'j'},
             {16,17,'k'},
             {16,17,'l'},
             {16,17,'m'},
             {16,17,'n'},
             {16,17,'o'},
             {16,17,'p'},
             {16,17,'q'},
             {16,17,'r'},
             {16,17,'s'},
             {16,17,'t'},
             {16,17,'u'},
             {16,17,'v'},
             {16,17,'w'},
             {16,17,'x'},
             {16,17,'y'},
             {16,17,'z'},
             {17,18,'0'},
             {17,18,'1'},
             {17,18,'2'},
             {17,18,'3'},
             {17,18,'4'},
             {17,18,'5'},
             {17,18,'6'},
             {17,18,'7'},
             {17,18,'8'},
             {17,18,'9'},
             {17,17,'A'},
             {17,17,'B'},
             {17,17,'C'},
             {17,17,'D'},
             {17,17,'E'},
             {17,17,'F'},
             {17,17,'G'},
             {17,17,'H'},
             {17,17,'I'},
             {17,17,'J'},
             {17,17,'K'},
             {17,17,'L'},
             {17,17,'M'},
             {17,17,'N'},
             {17,17,'O'},
             {17,17,'P'},
             {17,17,'Q'},
             {17,17,'R'},
             {17,17,'S'},
             {17,17,'T'},
             {17,17,'U'},
             {17,17,'V'},
             {17,17,'W'},
             {17,17,'X'},
             {17,17,'Y'},
             {17,17,'Z'},
             {17,17,'a'},
             {17,17,'b'},
             {17,17,'c'},
             {17,17,'d'},
             {17,17,'e'},
             {17,17,'f'},
             {17,17,'g'},
             {17,17,'h'},
             {17,17,'i'},
             {17,17,'j'},
             {17,17,'k'},
             {17,17,'l'},
             {17,17,'m'},
             {17,17,'n'},
             {17,17,'o'},
             {17,17,'p'},
             {17,17,'q'},
             {17,17,'r'},
             {17,17,'s'},
             {17,17,'t'},
             {17,17,'u'},
             {17,17,'v'},
             {17,17,'w'},
             {17,17,'x'},
             {17,17,'y'},
             {17,17,'z'},
             {18,18,'0'},
             {18,18,'1'},
             {18,18,'2'},
             {18,18,'3'},
             {18,18,'4'},
             {18,18,'5'},
             {18,18,'6'},
             {18,18,'7'},
             {18,18,'8'},
             {18,18,'9'},
             {18,17,'A'},
             {18,17,'B'},
             {18,17,'C'},
             {18,17,'D'},
             {18,17,'E'},
             {18,17,'F'},
             {18,17,'G'},
             {18,17,'H'},
             {18,17,'I'},
             {18,17,'J'},
             {18,17,'K'},
             {18,17,'L'},
             {18,17,'M'},
             {18,17,'N'},
             {18,17,'O'},
             {18,17,'P'},
             {18,17,'Q'},
             {18,17,'R'},
             {18,17,'S'},
             {18,17,'T'},
             {18,17,'U'},
             {18,17,'V'},
             {18,17,'W'},
             {18,17,'X'},
             {18,17,'Y'},
             {18,17,'Z'},
             {18,17,'a'},
             {18,17,'b'},
             {18,17,'c'},
             {18,17,'d'},
             {18,17,'e'},
             {18,17,'f'},
             {18,17,'g'},
             {18,17,'h'},
             {18,17,'i'},
             {18,17,'j'},
             {18,17,'k'},
             {18,17,'l'},
             {18,17,'m'},
             {18,17,'n'},
             {18,17,'o'},
             {18,17,'p'},
             {18,17,'q'},
             {18,17,'r'},
             {18,17,'s'},
             {18,17,'t'},
             {18,17,'u'},
             {18,17,'v'},
             {18,17,'w'},
             {18,17,'x'},
             {18,17,'y'},
            {18,17,'z'}};
            FinalStates=new int[]{0,1,2,9,10,3,16,17,18,15,4,5,6,7,8,12,13,14};
            Lookaheads=new string[]{"0,1;;","2,9,10;;","3;;","16,17,18;;","15;;","4,5,6;;","7,8,12,13,14;;"};                
       }
    }
}